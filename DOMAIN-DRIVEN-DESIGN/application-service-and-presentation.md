# 응용 서비스와 표현 영역

## 1. 표현 영역과 응용 영역

- 도메인 계층이 제 기능을 하려면, **사용자와 도메인을 연결하는 매개체**가 필요하다. 이 역할을 **표현(Presentation) 영역**과 **응용(Application) 영역**이 담당한다.

### 1.1. 표현 영역의 역할

- 표현 영역은 **사용자의 요청을 해석**하는 책임을 진다. 예를 들어, 웹 브라우저로부터 HTTP 요청을 받아 URL, 파라미터, 쿠키 등을 분석하여 사용자가 원하는 기능이 무엇인지 판별한다.
- 또한, 사용자의 요청 데이터를 **응용 서비스가 처리할 수 있는 형식으로 변환**하여, 알맞은 응용 서비스의 메서드를 호출한다.
- 마지막으로, 응용 서비스로부터 받은 **실행 결과를 사용자에게 적절한 형식(예: HTML, JSON)으로 변환하여 응답**한다.

### 1.2. 응용 영역의 역할

- 사용자가 원하는 **실질적인 기능을 제공하는 주체**는 응용 영역에 위치한 **응용 서비스**이다.
- 응용 서비스는 기능을 실행하는 데 필요한 데이터들을 **메서드의 인자(파라미터)로 전달받고, 실행 결과를 반환**하는 형태로 구현된다.

## 2. 응용 서비스의 역할

- 응용 서비스의 주요 역할은 **사용자가 요청한 기능을 실행**하는 것이다. 이를 위해 리포지터리에서 도메인 객체를 가져와 사용하거나 새로 생성하여 **도메인 객체 간의 흐름을 제어**한다.
- 이런 관점에서 응용 서비스는, 표현 영역과 도메인 영역을 연결하는 **창구(Facade)** 역할을 수행한다고 볼 수 있다.
- 응용 서비스는 도메인 로직을 직접 수행하지 않고 흐름 제어만 담당하므로, **코드가 복잡해서는 안 된다**. 만약 응용 서비스가 복잡하다면, 도메인 로직의 일부를 직접 구현하고 있을 가능성이 높으며 이는 코드 품질을 저하시킨다.
- 또한, 응용 서비스의 중요한 책임 중 하나는 **트랜잭션 관리**이다. 데이터의 일관성이 깨지지 않도록, 도메인의 상태 변경은 반드시 응용 서비스가 관리하는 트랜잭션 안에서 실행되어야 한다.

### 2.1. 도메인 로직 넣지 않기

- 가장 중요한 원칙은 **도메인 로직을 응용 서비스에 구현하지 않는 것**이다. 도메인 로직은 반드시 도메인 영역에 위치해야 한다.
- 만약 도메인 로직을 응용 서비스와 도메인 영역에 분산시키면, **코드의 응집성이 떨어진다**. 관련된 데이터와 로직이 서로 다른 곳에 흩어져 있어 전체 로직을 파악하기 어려워지기 때문이다.
- 또한, **여러 응용 서비스에서 동일한 도메인 로직을 중복으로 구현**할 가능성이 커진다.
- 결과적으로 이러한 문제들은 **코드를 변경하기 어렵게 만들어**, 소프트웨어의 핵심 경쟁력인 **변경 용이성을 떨어뜨리고 전체적인 가치를 저하**시킨다.

# CloudWatch

## 1. CloudWatch

- DevOps 엔지니어, 개발자, SRE(사이트 안정성 엔지니어) 및 IT 관리자를 위해 구축된 **모니터링** 및 **관찰 기능** 서비스이다.
- 애플리케이션을 모니터링하고 시스템 전반의 성능 변경 사항에 대응하며, 리소스 사용률을 최적화하고 운영 상태에 대한 **통찰력**을 제공한다.
- AWS에서 제공하는 **애플리케이션 모니터링 서비스**이다.
- **Public 서비스**로, 인터넷을 통해 접근하거나 **Interface Endpoint**를 통해 접근 가능하다.
- 로그, 지표, 이벤트 등의 운영 데이터를 수집하여 **시각화** 및 **처리**한다.
- **경보 생성**을 통해 자동화된 대응이 가능하다.
- AWS의 거의 대부분의 서비스와 기본적으로 **연동**된다.

## 2. CloudWatch 주요 기능

### 2.1. 지표(Metric) 수집

- 시간 순서로 정리된 **데이터의 집합**으로, 다수의 **데이터 포인트**로 구성된다.
- AWS의 대부분의 서비스는 기본적으로 **지표**를 제공한다(예: EC2 CPU 사용량, 네트워크 등).
- **커스텀 지표** 생성이 가능하다. 유저가 직접 원하는 데이터 포인트를 생성해서 CloudWatch로 전달하여 생성한다.

### 2.2. 경보(Alarm)

- 수집된 지표 값의 변동에 따라 발생하는 **알림**을 생성한다.
- 일정 수치(**Threshold**)에 도달하거나 이상/이하일 때 이벤트가 발생한다.
- 다양한 방법으로 **대응**이 가능하다.
  - **SNS**로 Lambda 실행, 이메일 전달 등이 가능하다.
  - 예: 웹 서버의 **500 에러**가 일정 수치 이상일 때 슬랙 알림을 전송한다.

### 2.3. 로그 수집 및 관리

- **Lambda**, **EC2**, **Route53**, **ECS** 등 여러 AWS 서비스의 **로그**를 수집한다.
- 수집된 로그를 **Kinesis**, **S3** 등 다른 서비스나 계정으로 **전달** 가능하다.
- 자체적으로 확인하거나 **쿼리**가 가능하다.

### 2.4. 대시보드

- 수집한 **로그/지표**를 기반으로 **대시보드**를 구성한다.
- 외부 리소스를 활용해서 **커스텀 대시보드** 구성이 가능하다.
  - **S3 객체** 표시, **HTML** 커스텀 그래프 표시 등을 지원한다.

### 2.5. 기타 서비스

- 애플리케이션을 모니터링하는 **Synthetics Canary**가 있다.
- 애플리케이션, 컨테이너, Lambda 등의 문제를 찾아주는 **인사이트 서비스** 등이 있다.

## 3. CloudWatch 요금

- 프리 티어(월)
  - **기본 모니터링 지표** 및 **커스텀 지표** 10개
  - **대시보드** 3개
  - **경보** 10개
  - **5GB**의 로그 데이터 등
- **요금** 부과 항목
  - **로그** 저장 비용, 분석 비용, **Live Tail** 비용 등이 발생한다.
  - **지표 개수**에 따라 비용이 발생한다.
  - **경보 개수**에 따라 비용이 발생한다.
  - 기타 **대시보드**, **모니터링**, **분석** 등 사용 서비스당 비용이 발생한다.

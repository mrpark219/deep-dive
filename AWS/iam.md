# IAM

## 1. IAM(Identity and Access Management)

- AWS 서비스와 리소스에 대한 엑세스를 **안전하게 관리**할 수 있는 서비스이다.
- 또한 AWS 사용자 및 그룹을 만들고 관리하며 AWS 리소스에 대한 엑세스를 허용 및 거부할 수 있다.
- AWS의 **보안 및 관리**를 담당하는 **글로벌 서비스**이다.
- 주요 기능은 다음과 같다.
  - AWS 어카운트 관리 및 리소스/사용자/서비스의 **권한 제어**
    - **임시 권한** 부여
    - 서비스 사용을 위한 **인증 정보** 부여
  - 사용자의 생성, 관리, 계정의 보안
    - **Multi-factor Authentication**
    - 사용자의 **패스워드 정책** 관리
  - 다른 계정과의 리소스 공유

## 2. IAM의 구성

### 2.1. 사용자

- 실제 AWS를 사용하는 **사람** 혹은 **애플리케이션**을 의미한다.

#### Root 사용자

- 계정을 생성할 때 같이 생성되는 사용자이다.
- 계정의 **모든 권한**을 가지고 있으며 계정 권한을 제한할 방법이 없다.
  - 탈취당했을 때 복구가 매우 어렵다.
- 자격 증명 부여가 가능하다.
- 루트 사용자만 가능한 작업
  - AWS 계정 설정 변경(메인 이메일 주소, 계정 이름, 연락처 정보 등)
  - 요금 관련 설정(IAM 사용자에게 위임 가능)
  - AWS Support Plan(지원 플랜) 구독, 변경, 취소
  - AWS 계정 삭제

#### IAM 사용자

- **IAM**을 통해 생성한 사용자이다.
- 생성 시 권한이 따로 부여되어 있지 않으며 **정책** 혹은 **그룹**을 통해 권한을 부여 받아 활동한다.
- 자격 증명 부여가 가능하다(Optional).
- 콘솔 로그인이 가능하다(Optional).
- 사람뿐만 아니라 **애플리케이션** 같은 다른 주체도 대표 가능하다.
- 사용자가 EC2에 접근하려고 할 경우, 사용자에게 권한이 부여되었는지 **정책**을 확인하고, 사용자가 속한 **그룹**에 정책이 부여되어 있는지 확인한다.

### 2.2. 그룹

- IAM **사용자의 집합**이다.
- 그룹에 **정책**을 부여하면, 그룹에 속한 모든 사용자가 해당 권한을 갖게 된다.

### 2.3. 역할(Role)

- AWS의 **권한의 집합**이다.
- 특정 사용자나 그룹에 연결되어 있지 않으며, IAM 사용자, AWS 서비스, 애플리케이션 등이 부여받아 활동한다.

### 2.4. 정책(policy)

- 사용자와 그룹, 역할이 무엇을 할 수 있는지 정의하는 **문서**이다.
- **JSON 형식**으로 작성되며, 각 주체(유저, 그룹, 역할)에 부여되어 행동 가능한 **권한**을 정의한다.
- 구성 요소는 다음과 같다.
  - **Resource**: 어떤 AWS 리소스에 대해서
  - **Action**: 어떤 행동을
  - **Effect**: 허용/거부
  - **Condition**: 정책이 적용되는 조건(IP 주소, 시간, 태그 등)

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "*",
      "Resource": "*"
    }
  ]
}
```

## 3. AWS 이용 방법

### 3.1. AWS 웹 콘솔

- 웹 기반의 콘솔에 로그인하여 AWS를 사용하는 방법이다.
- **콘솔 엑세스 자격 증명**을 사용하여 인증한다.
- 콘솔 엑세스 자격 증명은 다음과 같다.
  - **Root Email/Password**: 루트 사용자가 로그인하기 위해 사용한다.
  - **IAM 사용자 이름/Password**: IAM 사용자가 로그인하기 위해 사용한다.
  - **MFA(Multi-Factor Authentication)**: 다른 자격 증명에 보안을 강화하기 위한 임시 비밀번호이다.

### 3.2. 프로그래밍 엑세스 방식

- **CLI(Command Line Interface)**: 명령줄 기반으로 AWS 서비스를 관리하는 통합 도구이다.
- **SDK(Software Development Kit)**: 다양한 프로그래밍 언어로 만들어진 AWS 서비스를 관리하는 패키지이다.
- 프로그래밍 언어에 맞는 SDK를 사용해 개발에 활용한다.
- **프로그래밍 방식 엑세스 자격 증명**을 사용하여 인증한다.
- 프로그래밍 방식 엑세스 자격 증명은 다음과 같다.

  - AWS의 CLI 혹은 SDK를 사용할 때 필요한 자격 증명이다.
  - **ACCESS KEY**의 구성은 다음과 같다.
    - **Access Key ID**: 사용자 이름에 해당하는 키이며, 일반적으로 공개되어도 무방하다.
    - **Secret Access Key**: 패스워드에 해당하는 키이며, **공개되면 안 된다**.
  - 하나의 IAM 사용자 당 2개의 **Access Key Pair** 발급이 가능하다.
  - 활성화/비활성화가 가능하다.
  - **Secret Access Key**의 경우 발급 시점 이외에 다시 확인이 불가능하다.
  - 생성한 IAM 사용자의 권한을 행사할 수 있다.

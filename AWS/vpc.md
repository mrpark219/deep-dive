# VPC

## 1. 네트워크 기초

### 1.1. 사설망

- 한정된 IP 주소를 최대한 **활용하기** 위해 IP 주소를 **분할**하고자 만든 개념이다. IPv4 기준으로 최대 IP 개수는 약 **43억 개**(4,294,967,296)이다.
- 사설망 내부에는 외부 인터넷 망으로 통신이 불가능한 **사설 IP**로 구성된다.
- 외부로 통신할 때는 통신 가능한 **공인 IP**로 나누어 사용한다.
- 보통 하나의 망에는 사설 IP를 부여받은 기기들과 **NAT 기능**을 갖춘 **Gateway**로 구성된다.

| Class |     이름     |       IP address range        | 아이피 개수 | 서브넷 마스크 |
| :---: | :----------: | :---------------------------: | :---------: | :-----------: |
| **A** | 24-bit block |   10.0.0.0 ~ 10.255.255.255   | 16,777,216  |  (255.0.0.0)  |
| **B** | 20-bit block |  172.16.0.0 ~ 172.31.255.255  |   104,857   | (255.240.0.0) |
| **C** | 16-bit block | 192.168.0.0 ~ 192.168.255.255 |   65,536    | (255.255.0.0) |

### 1.2. NAT(Network Address Translation)

- 사설 IP가 공용 IP로 통신할 수 있도록 주소를 **변환**해 주는 방법이다.
- 3가지 종류가 있다.
  - **Dynamic NAT**: 1개의 사설 IP를 가용 가능한 공인 IP로 연결한다.
  - **Static NAT**: 하나의 사설 IP를 고정한 하나의 공인 IP로 연결한다.
  - **PAT(Port Address Translation)**: 많은 사설 IP를 하나의 공인 IP로 연결한다.

### 1.3. CIDR(Classless Inter Domain Routing)

- IP 주소의 영역을 여러 네트워크 영역으로 나누기 위해 IP를 **묶는 방식**이다. 여러 개의 사설망을 구축하기 위해 망을 나누는 방법이다.

#### CIDR Notation

- IP 주소의 **집합**이다.
- **네트워크 주소**와 **호스트 주소**로 구성된다.
- 각 호스트 주소 숫자만큼의 IP를 가진 네트워크 망 형성이 가능하다.
- **A.B.C.D/E** 방식이다.
  - **A, B, C, D**: 네트워크 주소 + 호스트 주소를 표시한다.
  - **E**: 0 ~ 32 범위이며, **네트워크 주소**가 몇 bit인지 표시한다.

#### CIDR Block

- **호스트 주소 비트**만큼 IP 주소를 보유 가능하다.
- **192.168.2.0/24**의 예시는 다음과 같다.

  - 네트워크 비트는 **24**이다.
  - 호스트 주소는 32 - 24 = **8**이다.
  - 즉 2^8 = **256개**의 IP 주소를 보유한다.
  - 192.168.2.0 ~ 192.168.2.255까지 총 **256개** 주소를 의미한다.

### 1.4. 서브넷

- **네트워크 안의 네트워크**이다.

- 큰 네트워크를 잘게 쪼갠 **단위**이다.
- 일정 IP 주소의 **범위**를 보유한다. 큰 네트워크에 부여된 IP 범위를 조금씩 잘라 작은 단위로 나눈 후 각 **서브넷**에 할당한다.

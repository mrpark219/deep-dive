# AWS 기초

## 1. AWS 구조

### 1.1 리전(Region)

- AWS의 서비스가 제공되는 서버의 **물리적 위치**이다.
- 전 세계에 흩어져 있으며 큰 구분(동남아, 유럽 등)으로 묶여있다.
- 각 리전에는 **고유의 코드**가 부여되며, 서울은 **ap-northeast-2**이다.
- 리전별로 가능한 서비스가 다르다.

#### 리전 선택 시 고려할 점

- **지연 속도**
- **법률**(데이터, 서비스 제공 관련)
- 사용 가능한 **AWS 서비스**
- **US-East-1**은 모든 AWS 서비스가 최초로 서비스되는 리전이다.

### 1.2. 가용 영역(Availability Zone)

- 리전의 **하부 단위**이다.
- 하나의 리전은 3개 이상의 가용영역으로 구성되며 **AZ**라고 줄여 부른다.
- AZ는 하나 이상의 **데이터 센터**로 구성되며, AZ 간의 연결은 매우 빠른 전용 네트워크로 이루어진다.
- AZ는 재해 대비를 위해 반드시 물리적으로 일정 거리 떨어져 있으며, 모든 AZ는 **100Km 이내**에 위치한다.
- 가용 영역과 실제 데이터센터의 연결은 계정마다 다르다. '가' 계정의 A 가용 영역이 1번 데이터센터라고 해서 '나' 계정의 A 가용 영역도 1번 데이터센터라는 보장은 없다.

### 1.3. 엣지 로케이션(Edge Location)

- AWS의 **CloudFront(CDN)** 같은 서비스를 가장 빠른 속도로 제공(캐싱)하기 위한 거점이다.
- **Global Accelerator**와 유저를 연결하는 거점이기도 하다.

### 1.4. 서비스의 종류

- AWS 서비스는 제공되는 지역 기반에 따라 **글로벌 서비스**와 **리전 서비스**로 분류된다.

#### 글로벌 서비스

- 데이터 및 서비스를 전 세계 **모든 인프라가 공유**하는 서비스이다.
- **IAM, Route53, WAF** 등이 이에 해당한다.

#### 리전 서비스

- **특정 리전**을 기반으로 데이터 및 서비스를 제공한다.
- 대부분의 서비스는 리전 전체의 가용 영역 또는 리전 내 하나의 가용 영역에서 서비스된다.

### 1.5. ARN(Amazon Resource Names)

- AWS의 리소스에 부여되는 **고유 아이디**이다.
- `arn:[partition]:[service]:[region]:[account_id]:[resource_type]:[resource_name]/[qualifier]`와 같은 형식을 갖는다.

## 2. AWS 계정

### 2.1. 계정(account)

- AWS의 사용자와 리소스를 관리하는 **단위**이다.
- AWS 계정에 AWS 리소스를 생성하며, 이후 다양한 사용 주체(IAM 사용자, 역할 등)가 생성된 리소스를 사용한다.
- **계정**은 **사용자**와 같지 않다.
- 계정 생성은 이메일, 신용카드, 계정 이름을 제공하거나 **AWS Organization**으로 생성할 수 있다.
- 계정 생성 시 **Root 사용자**와 기본 리소스(기본 VPC) 등이 생성된다.
- AWS **계정 아이디**(숫자)가 부여된다.
- 로그인 시 해당 숫자를 기억해야 하며, 추후 AWS 계정에서 **별명** 지정이 가능하다.

### 2.2. Root 사용자

- 계정을 생성할 때 같이 생성되는 사용자이다.
- 계정의 **모든 권한**을 가지고 있으며 권한을 제한할 방법이 없다.
- 탈취당했을 때 복구가 매우 어렵다.
- 첫 로그인 이후 35일 안에 **MFA 등록**이 필수이다.

#### 2.2.1 Root 사용자만 가능한 작업

- AWS 계정 설정 변경(메인 이메일 주소, 계정 이름, 연락처 정보 등)
- 요금 관련 설정(IAM 유저에게 위임 가능)
- AWS Support Plan(지원 플랜) 구독, 변경, 취소
- AWS 계정 삭제

### 2.3. IAM 사용자

- **IAM(Identity and Access Management)** 을 통해 생성한 사용자이다.
- 생성 시 권한이 따로 부여되어 있지 않으며, **정책** 혹은 **그룹**을 통해 권한을 부여받아 활동한다.
- 사람이 아닌 애플리케이션 등의 **가상의 주체**를 대표할 수도 있다.

### 2.4. AWS 계정의 의미

- AWS 리소스 관리의 일반적인 **최대 단위**이다.
  - 일반적으로 설정의 가장 큰 단위는 계정이다. (예: 계정별 S3 최대 버킷 개수 등)
- **관리** 및 **피해 범위**를 한정할 수 있다.
  - 권한 관리를 쉽게 할 수 있다.
  - 해킹 등의 피해 발생 시 **피해 범위**를 **최소화**할 수 있다.
- **비용 범위**에 대한 확인을 쉽게 할 수 있다.

### 2.5. AWS 계정을 지키는 설정

- 루트 사용자 및 IAM 사용자의 **MFA**를 설정한다.
- **비용 모니터링**을 설정한다.
  - AWS **Budget**을 이용한다.
- AWS의 **리소스 모니터링**을 한다.
  - AWS **Config**를 이용한다.
  - AWS **User Notifications**를 이용한다.

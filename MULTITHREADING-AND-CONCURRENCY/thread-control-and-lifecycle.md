# 스레드 제어와 생명 주기

## 1. 스레드 생성

- `Thread`를 생성할 때, `Runnable` 구현체와 함께 스레드의 이름을 인자로 전달할 수 있다.

```java
// 실행할 작업(Runnable)과 스레드 이름("myThread")을 전달하여 스레드 생성
Thread myThread = new Thread(new HelloRunnable(), "myThread");
```

- `Runnable` 인터페이스: 스레드가 실행할 작업을 정의하는 인터페이스이다.
- 스레드 이름: **디버깅이나 로깅 시 스레드를 식별**하는 데 유용한 이름이다. 이름을 지정하지 않으면 `Thread-0`과 같이 자동으로 생성된다.

## 2. 스레드 객체 정보

- `Thread` 클래스의 `toString()` 메서드는 스레드에 대한 **주요 정보를 요약한 문자열을 반환**한다.
- 예시: `Thread[#1,main,5,main]`는 각각 **스레드 ID, 이름, 우선순위, 그룹**을 의미한다.

### 2.1. 스레드 ID (`threadId()`)

- **스레드의 고유 식별자(ID)**를 반환하는 메서드이다. 이 ID는 JVM 내에서 유일하며, **직접 지정할 수 없다**.

### 2.2. 스레드 이름 (`getName()`)

- **스레드의 이름을 반환**하는 메서드이다. 스레드 이름은 **서로 중복될 수 있다**.

### 2.3. 스레드 우선순위 (`getPriority()`)

- **스레드의 우선순위를 반환**하는 메서드이다. 우선순위는 **1(가장 낮음)부터 10(가장 높음)까지의 값**을 가지며, 기본값은 5이다.
- 우선순위는 스케줄러가 어떤 스레드를 먼저 실행할지 결정하는 데 영향을 주지만, **실제 실행 순서는 운영체제에 따라 달라질 수 있다**.

### 2.4. 스레드 그룹 (`getThreadGroup()`)

- **스레드가 속한 스레드 그룹을 반환**하는 메서드이다. 스레드 그룹은 여러 스레드를 하나의 단위로 묶어 관리하는 기능을 제공한다.
- 스레드는 자신을 생성한 **부모 스레드(Parent Thread)와 동일한 스레드 그룹**에 속하게 된다.
- `main()` 메서드에서 생성된 `myThread`의 부모는 `main` 스레드이므로, `myThread` 역시 `main` 스레드가 속한 `main` 그룹에 소속된다.

### 2.5. 스레드 상태 (`getState()`)

- **스레드의 현재 상태**를 `Thread.State` 열거형으로 반환하는 메서드이다.
  - `NEW`: 스레드가 생성되었지만 아직 `start()`가 호출되지 않은 상태이다.
  - `RUNNABLE`: 실행 가능 상태로, CPU를 할당받으면 언제든지 실행될 수 있는 상태이다.
  - `BLOCKED`: 동기화 락(synchronized)을 얻기 위해 대기하는 상태이다.
  - `WAITING`: 다른 스레드가 특정 작업을 수행하고 통지(notify)해주기를 무한정 기다리는 상태이다.
  - `TIMED_WAITING`: 지정된 시간 동안만 기다리는 상태이다.
  - `TERMINATED`: `run()` 메서드의 실행이 완전히 종료된 상태이다.

## 3. 스레드의 생명 주기

- 자바 스레드는 여러 상태를 가지며, 이 상태들의 변화 과정을 **스레드 생명 주기(Thread Lifecycle)** 라고 한다.
- 주요 상태는 `New`, `Runnable`, `Terminated`이며, `Runnable` 상태에서 다른 작업을 기다리는 여러 **'일시 중지' 상태**(`Blocked`, `Waiting`, `Timed Waiting`)로 전환될 수 있다.

### 3.1. New (생성)

- **`Thread` 객체가 생성되었지만, 아직 `start()` 메서드가 호출되지 않은 상태**이다.

### 3.2. Runnable (실행 대기)

- `start()` 메서드가 호출되면 스레드는 이 상태로 들어간다.
- 이 상태는 스레드가 **실행 중이거나 또는 실행될 준비가 되어** 언제든 CPU를 할당받을 수 있음을 의미한다.
- 자바에서는 OS 스케줄러의 실행 대기열에 있는 상태와, 실제 CPU에서 실행 중인 상태를 **구분하지 않고 모두 `Runnable` 상태**로 본다.

### 3.3. Blocked (일시 중지: 동기화 블록)

- **`synchronized` 블록에 진입하기 위해 다른 스레드가 점유한 락(lock)을 기다리는 상태**이다.

### 3.4. Waiting (일시 중지: 무한 대기)

- **다른 스레드가 특정 작업을 완료하고 `notify()` 또는 `notifyAll()`을 호출해줄 때까지 무한정 기다리는 상태**이다.
- `Object.wait()`, `Thread.join()` 메서드 등이 호출될 때 이 상태가 된다.

### 3.5. Timed Waiting (일시 중지: 시간 제한 대기)

- **지정된 시간 동안만 다른 스레드의 작업이 완료되기를 기다리는 상태**이다.
- 시간이 경과하거나 다른 스레드가 해당 스레드를 깨우면 이 상태에서 벗어난다. `Thread.sleep(long)`, `Object.wait(long)` 등이 호출될 때 이 상태가 된다.

### 3.6. Terminated (종료)

- `run()` 메서드의 실행이 정상적으로, 혹은 예외로 인해 **완전히 종료된 상태**이다.
- 한번 `Terminated` 상태가 된 스레드는 다시 시작할 수 없다.

### 3.7. 자바 스레드의 상태 전이 과정

- **`New` → `Runnable`**
  - `start()` 메서드를 호출하면 전이된다.
- **`Runnable` → `Blocked`/`Waiting`/`Timed Waiting`**
  - 동기화 락을 기다리거나, `wait()`, `sleep()`, `join()` 등의 메서드를 호출하면 전이된다.
- **`Blocked`/`Waiting`/`Timed Waiting` → `Runnable`**
  - 락을 얻거나, 기다림이 끝나면(시간 초과, `notify` 등) 다시 `Runnable` 상태로 돌아가 실행 순서를 기다린다.
- **`Runnable` → `Terminated`**
  - `run()` 메서드가 완료되면 `Terminated` 상태가 된다.

# 독립성

- 좋은 아키텍처는 다음을 지원해야 한다.
  - 시스템의 유스케이스
  - 시스템의 운영
  - 시스템의 개발
  - 시스템의 배포

## 1. 유스케이스

- 시스템의 아키텍처는 시스템의 **의도**를 지원해야 한다.
- 아키텍트의 최우선 관심사는 **유스케이스**이며, 아키텍처에서도 유스케이스가 최우선이다.
- 아키텍처는 시스템의 **행위**에 그다지 큰 영향을 주지 않는다.
  - 하지만 영향력이 전부는 아니다.
  - 좋은 아키텍처가 행위를 지원하기 위해 할 수 있는 일 중 가장 중요한 사항은 행위를 **명확히** 하고 외부로 **드러내며**, 이를 통해 시스템이 지닌 의도를 아키텍처 수준에서 알아볼 수 있게 만드는 것이다.

## 2. 운영

- 시스템의 운영 관점에서 볼 때 아키텍처는 더 **실질적**이며 덜 피상적인 역할을 맡는다.
- 시스템이 초당 몇 명의 고객을 처리해야 한다면, 아키텍처는 이 요구와 관련된 각 유스케이스에 걸맞은 **처리량**과 **응답 시간**을 보장해야 한다.
- 만약 시스템이 **단일체(Monolith)** 로 작성되어 구조를 갖는다면, 다중 프로세스, 다중 스레드, 또는 마이크로서비스 형태가 필요해질 때 개선하기가 어렵다.
- 그에 비해 아키텍처가 각 컴포넌트를 적절히 **격리**하여 유지하고 컴포넌트 간 통신 방식을 **특정 형태**로 제한하지 않는다면, 시간이 지나 운영에 필요한 요구사항이 바뀌더라도 스레드, 프로세스, 서비스로 구성된 **기술 스펙트럼** 사이를 **전환하는** 일이 훨씬 쉬워진다.

## 3. 개발

- 아키텍처는 **개발 환경**을 지원하는 데 있어 핵심적인 역할을 수행한다. 이때 **콘웨이의 법칙(Conway's Law)** 이 작용한다.
- 콘웨이의 법칙은 시스템을 설계하는 조직이라면 어디든지 그 조직의 **의사소통 구조**와 동일한 구조의 설계를 만들어낼 것이라는 법칙이다.
- 많은 팀으로 구성되며 관심사가 다양한 조직에서 어떤 시스템을 개발해야 한다면, 각 팀이 **독립적**으로 행동하기 편한 아키텍처를 반드시 확보하여 개발하는 동안 다른 팀들이 서로를 **방해하지** 않도록 해야 한다.

## 4. 배포

- 아키텍처는 **배포 용이성**을 결정하는 데 중요한 역할을 한다.
- 이때 목표는 **즉각적인 배포**이다.
- 좋은 **아키텍처라면** 시스템이 빌드된 후 즉각 배포할 수 있도록 지원해야 한다.
- 이러한 아키텍처를 만들기 위해서는 시스템을 **컴포넌트 단위**로 적절하게 분할하고 **격리**시켜야 한다.
- 여기에는 **마스터 컴포넌트**도 포함된다.
  - 마스터 컴포넌트는 시스템 전체를 하나로 묶고, 각 컴포넌트를 올바르게 구동하고 통합하고 관리해야 한다.

## 5. 선택사항 열어두기

- 좋은 아키텍처는 여러 관심사(개발, 배포, 운영 등) 사이에서 **균형**을 맞춰야 한다.
  - 하지만 현실에서는 모든 요구사항이 끊임없이 **변하기** 때문에 완벽한 균형을 잡기는 매우 어렵다.
- 이러한 불확실성 속에서 아키텍처가 할 수 있는 최선은 **선택사항을 열어두는 것**이다.
  - 시스템을 잘 **격리된 컴포넌트**로 나누어 놓으면, 미래에 변경이 필요할 때 **어떤 방향으로든** 쉽게 대응할 수 있다.
  - 즉, 세부적인 결정(DB, 프레임워크 등)을 가능한 한 **오랫동안 미룰 수 있게** 해준다.

## 6. 계층 결합 분리

- 아키텍트는 모든 세부 유스케이스를 알 수는 없지만, 시스템의 **기본적인 의도**(예: 쇼핑몰인지, 재고 관리 시스템인지)는 분명히 알고 있다.
- 따라서 **변경의 이유**가 다른 것들은 철저히 **분리**해야 한다.
  - 이를 위해 **단일 책임 원칙(SRP)** 과 **공통 폐쇄 원칙(CCP)** 을 적용한다.
  - **같이 변하는 것**들은 묶고, **따로 변하는 것**들은 분리한다는 원칙이다.
- 가장 대표적인 예가 **UI(사용자 인터페이스)** 와 **업무 규칙(비즈니스 로직)** 의 분리이다.
  - UI가 바뀌더라도 업무 규칙은 영향받지 않아야 하며, 서로 **독립적**으로 변경될 수 있어야 한다.

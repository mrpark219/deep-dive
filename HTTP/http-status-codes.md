# HTTP 상태 코드

## 1. HTTP 상태 코드

- **클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능**이다.
- 상태 코드 종류
  - **1xx (Informational)**: 요청이 수신되어 처리 중이다.
  - **2xx (Successful)**: 요청이 정상적으로 처리되었다.
  - **3xx (Redirection)**: 요청을 완료하려면 추가 행동이 필요하다.
  - **4xx (Client Error)**: 클라이언트 오류로 인해 요청을 처리할 수 없다.
  - **5xx (Server Error)**: 서버 오류로 인해 정상적인 요청을 처리할 수 없다.

### 1.1 모르는 상태 코드가 나타날 때

- 클라이언트가 인식할 수 없는 상태 코드가 나타나도 상위 상태 코드 범위로 해석하면 된다.

## 2. 2xx - 성공 (Successful)

- 클라이언트의 요청이 성공적으로 처리되었다.

### 2.1 2xx 상태 코드 목록

| 상태 코드          | 설명                                                                                                                                                                                                                               |
| ------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **200 OK**         | 요청이 성공적으로 처리되었다.                                                                                                                                                                                                      |
| **201 Created**    | 요청이 성공적으로 처리되었으며, 새로운 리소스가 생성되었다. <br> 생성된 리소스는 응답의 Location 헤더 필드로 식별할 수 있다.                                                                                                       |
| **202 Accepted**   | 요청이 접수되었으나 처리가 완료되지 않았다. <br> 배치 처리 같은 곳에서 사용한다.                                                                                                                                                   |
| **204 No Content** | 요청이 성공적으로 수행되었지만 응답 본문에 보낼 데이터가 없다. <br> save 버튼의 결과로 아무 내용이 없어도 된다. <br> save 버튼을 눌러도 같은 화면을 유지해야 한다. <br> 결과 내용이 없어도 204 메시지만으로 성공을 인식할 수 있다. |

## 3. 3xx - 리다이렉션 (Redirection)

- 요청을 완료하기 위해 유저 에이전트의 추가 조치가 필요하다.
- 300 상태 코드는 사용하지 않는다.

### 3.1 3xx 상태 코드 목록

| 상태 코드                  | 설명                                                                                                                                                      |
| -------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **300 Multiple Choices**   | 서버가 요청에 따라 여러 조치를 선택할 수 있다. <br> 서버가 사용자 에이전트에 따라 수행할 작업을 선택하거나, 요청자가 선택할 수 있는 작업 목록을 제공한다. |
| **301 Moved Permanently**  | 리소스가 영구적으로 이동되었으며, URL을 변경해야 한다.                                                                                                    |
| **302 Found**              | 리소스가 일시적으로 이동되었으며, 요청 메서드가 GET으로 변할 수 있다.                                                                                     |
| **303 See Other**          | 리다이렉트 시 요청 메서드가 GET으로 변경된다.                                                                                                             |
| **304 Not Modified**       | 클라이언트 캐시가 유효하며 변경이 없으므로 캐시를 사용해야 한다.                                                                                          |
| **307 Temporary Redirect** | 리다이렉트 요청 시 요청 메서드를 유지해야 한다.                                                                                                           |
| **308 Permanent Redirect** | 301과 유사하지만 요청 메서드와 본문을 유지해야 한다.                                                                                                      |

### 3.2 리다이렉트 흐름

1. 클라이언트가 서버로 요청을 보낸다.
2. 서버가 `Location` 헤더를 포함하여 리다이렉트 응답을 전송한다.
3. 클라이언트가 자동으로 새로운 URL로 요청을 보낸다.
4. 서버가 클라이언트 요청을 처리하고 응답을 반환한다.

### 3.3 리다이렉트 유형

- **영구 리다이렉션 (Permanent Redirect)**
  - 특정 리소스의 URI가 **영구적으로 변경된다.**
  - **301**: 리다이렉트 시 요청 메서드가 GET으로 변하고 본문이 제거될 수 있다.
  - **308**: 301과 기능은 같지만, 요청 메서드와 본문을 유지한다.
  - 원래의 URL을 사용하지 않는다. 검색 엔진 등에서도 변경을 인지한다.
- **일시 리다이렉션 (Temporary Redirect)**
  - 특정 리소스의 URI가 **일시적으로 변경된다.**
  - **302**: 리다이렉트 시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있다.
  - **307**: 302와 기능은 같지만, 요청 메서드와 본문이 유지된다.
  - **303**: 302와 기능은 같지만, 요청 메서드가 GET으로 변경된다.
  - 검색 엔진 등에서 URL을 변경하면 안 된다.
  - 예) 주문 완료 후 주문 내역 화면으로 이동
- **특수 리다이렉션 (304 Not Modified)**
  - 캐시를 목적으로 사용된다.
  - 클라이언트가 로컬 PC에 저장된 캐시를 재사용하도록 유도한다.
  - 304 응답은 메시지 바디를 포함하면 안 된다.

## 4. 4xx - 클라이언트 오류 (Client Error)

- 클라이언트의 요청이 잘못되었거나 문법 오류 등으로 인해 서버가 요청을 수행할 수 없다.
- 오류의 원인이 클라이언트에 있으며, 재시도를 해도 실패한다.

### 4.1 4xx 상태 코드 목록

| 상태 코드            | 설명                                               |
| -------------------- | -------------------------------------------------- |
| **400 Bad Request**  | 잘못된 요청으로 인해 서버가 요청을 처리할 수 없다. |
| **401 Unauthorized** | 인증(Authentication)이 필요하다.                   |
| **403 Forbidden**    | 인증은 되었지만 접근 권한이 부족하다.              |
| **404 Not Found**    | 요청한 리소스를 찾을 수 없다.                      |

### 4.2 400 Bad Request

- 클라이언트의 요청이 잘못되어 서버가 처리할 수 없다.
- 요청 구문, 메시지 형식 오류, 요청 파라미터가 잘못되거나 API 스펙과 맞지 않는 경우에 사용된다.

### 4.3 401 Unauthorized

- 클라이언트가 인증되지 않아 요청을 처리할 수 없다.
- **참고:**
  - **인증(Authentication)**: 사용자의 신원을 확인하는 과정 (예: 로그인)
  - **인가(Authorization)**: 특정 리소스에 대한 접근 권한 부여 (예: 관리자 권한)
- 401 오류 발생 시 응답 헤더에 `WWW-Authenticate`를 포함하여 인증 방법을 제공할 수 있다.

### 4.4 403 Forbidden

- 클라이언트의 요청을 서버가 이해했지만, 승인을 거부하였다.
- **주로 인증은 되었지만, 접근 권한이 부족한 경우 발생한다.**

### 4.5 404 Not Found

- 요청한 리소스를 찾을 수 없다.
- 요청한 리소스가 존재하지 않는 경우나 클라이언트가 접근할 수 없는 리소스를 숨기고 싶을 때 사용된다.

## 5. 5xx - 서버 오류 (Server Error)

- 서버 문제로 발생한 오류이다.
- 서버에 문제가 있기 때문에 재시도하면 성공할 수도 있다.

### 5.1 5xx 상태 코드 목록

| 상태 코드                     | 설명                                                                                                                   |
| ----------------------------- | ---------------------------------------------------------------------------------------------------------------------- |
| **500 Internal Server Error** | 서버 내부 오류가 발생하여 요청을 처리할 수 없다.                                                                       |
| **503 Service Unavailable**   | 서버 과부하 또는 점검으로 인해 일시적으로 요청을 처리할 수 없다. `Retry-After` 헤더를 통해 복구 시간을 제공할 수 있다. |

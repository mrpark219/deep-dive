# 인터넷 통신

## 1. IP(인터넷 프로토콜)

### 1.1 IP의 역할

- 지정한 IP 주소(IP Address)로 데이터를 전달하는 역할을 한다.
- 패킷(Packet)이라는 통신 단위로 데이터를 전달한다.

### 1.2 패킷

- 네트워크를 통해 전송되는 형식화된 데이터 덩어리이다.
- 주요 컴포넌트로 사용자 데이터(전송 데이터, 페이로드)와 제어 정보(페이로드를 전달하기 위한 정보)가 있다.

### 1.3 패킷 헤더

- 소스 및 목적지의 네트워크 주소, 순서 정보, 오류 감지 코드로 구성된다.

### 1.4 클라이언트와 서버의 패킷 전달

- 클라이언트와 서버가 서로 통신할 때 패킷이 인터넷 망을 거친다.
- 인터넷 망을 구성하는 노드들이 패킷 헤더의 출발지 IP와 목적지 IP 정보를 읽고, 패킷을 다음 노드로 전달하는 과정을 반복하며 데이터를 주고 받을 수 있다.

### 1.5 IP 프로토콜의 한계

- **비연결성**: 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷이 전송된다.
- **비신뢰성**: 중간에 패킷이 사라지거나 순서가 바뀔 수 있다.
- **프로그램 구분 불가**: 같은 IP를 사용하는 서버에서 여러 애플리케이션이 통신할 경우, 구별할 방법이 없다.

## 2. TCP와 UDP

### 2.1 인터넷 프로토콜 스택의 4계층

- **애플리케이션 계층**: HTTP, FTP 등
- **전송 계층**: TCP, UDP
- **인터넷 계층**: IP
- **네트워크 인터페이스 계층**: 물리적인 네트워크 연결

### 2.2 프로토콜 계층 (채팅 프로그램 예시)

1. 프로그램이 채팅 데이터를 생성한다.
2. SOCKET 라이브러리를 통해 데이터를 전달한다.
3. TCP가 전송 정보를 생성하고, 메시지 데이터를 포함한다.
4. IP 패킷이 생성되며, TCP 데이터를 포함한다.
5. 이더넷 프레임이 생성되며, IP 패킷 데이터를 포함한다.
   - 이더넷 프레임에는 랜카드의 MAC 주소 같은 물리적인 정보가 포함된다.

### 2.3 TCP/IP 패킷 정보

- 출발지 PORT
- 목적지 PORT
- 전송 제어 정보
- 순서 정보
- 검증 정보

### 2.4 TCP(전송 제어 프로토콜, Transmission Control Protocol) 특징

- 연결지향 프로토콜이며, TCP 3-way handshake를 통해 가상 연결을 형성한다.
- 데이터 전달을 보증한다.
- 패킷의 순서를 보장한다.
- 신뢰할 수 있는 프로토콜이다.
- 현재 대부분의 네트워크에서 TCP를 사용한다.

### 2.5 연결지향 - TCP 3 way handshake

1. 클라이언트가 서버로 SYN(Synchronize, 접속 요청) 패킷을 보낸다. (**클라이언트 SYN_SENT 상태**)
2. 서버가 클라이언트의 요청을 받으면 요청을 수락한다는 ACK(Acknowledgment, 요청 수락) + SYN 패킷을 발송하고 클라이언트가 다시 ACK로 응답할 때까지 대기한다. (**서버 SYN_RECEIVED 상태**)
3. 클라이언트가 서버의 응답을 수락하고, ACK를 보낸다. 연결이 성립된다. (**서버 ESTABLISHED 상태**)

- ACK와 함께 데이터를 전송할 수 있다.

### 2.6 UDP(사용자 데이터그램 프로토콜, User Datagram Protocol) 특징

- 비연결형 서비스 제공한다.
- 헤더와 전송 데이터에 대한 체크섬 기능을 제공한다.
- 데이터 변형 오류 검출 기능을 제공하지 않는다.
- TCP보다 단순하고 빠르다.
- 신뢰성이 낮아, 애플리케이션에서 추가적인 처리 작업이 필요하다.

## 3. PORT

### 3.1 여러 연결을 동시에 처리하는 방법

- 클라이언트가 여러 개의 서버에 접속하여 동시에 여러 작업을 수행할 때, 포트(PORT)를 사용해 구분한다.
- 같은 IP 내에서 실행 중인 프로세스를 구분하기 위해 포트를 사용한다.
- IP가 아파트라면, 포트는 아파트 내의 특정 호수에 해당한다.

### 3.2 TCP/IP 패킷 정보

- TCP 세그먼트 헤더에 출발지 PORT와 목적지 PORT를 포함하여 요청을 구별한다.

### 3.3 PORT의 할당 범위

- 0 ~ 65535: 할당 가능
- 0 ~ 1023: Well-Known Port (잘 알려진 포트)로, 사용을 피하는 것이 좋다.
  - FTP: 20, 21
  - TELNET: 23
  - HTTP: 80
  - HTTPS: 443

## 4. DNS (Domain Name System)

### 4.1 DNS를 사용하는 이유

- IP 주소는 사람이 기억하기 어렵다.
- IP 주소는 변경될 수 있다.

### 4.2 DNS의 역할

- DNS는 도메인 이름을 IP 주소로 변환하는 역할을 한다.
- 전화번호부와 같은 역할을 수행한다.

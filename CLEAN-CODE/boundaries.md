# 경계

- 시스템에 들어가는 모든 소프트웨어를 직접 개발하는 경우는 드물다.
- 대부분 외부 라이브러리나 프레임워크를 사용하며, **외부 코드를 깔끔하게 통합**하는 일이 중요하다.

## 1. 외부 코드 사용하기

- **인터페이스 제공자**와 **인터페이스 사용자** 사이에는 긴장이 존재한다.
  - 제공자는 **적용성을 넓히려** 하고,
  - 사용자는 **자신의 목적에 집중된 인터페이스**를 원한다.
- 이 긴장으로 인해 **시스템 경계에서 문제가 발생할 가능성이 높다**.
- 외부 패키지의 인터페이스를 **프로젝트 전반에 퍼뜨리면 안 된다**.
- 외부 인터페이스를 사용할 때는 **사용 범위를 한정하고 캡슐화**해야 한다.

## 2. 경계 살피고 익히기

- 외부 코드를 사용하면 **생산성이 향상되지만**, 사용법을 익히고 통합하는 과정은 **복잡하고 어렵다**.
- **외부 라이브러리 자체를 테스트할 필요는 없지만**, **우리가 사용하는 방식대로는 반드시 테스트**해야 한다.
- 가장 좋은 방법은 **간단한 테스트 코드를 먼저 작성**하여 라이브러리의 사용법과 동작을 확인하는 것이다. 이를 **학습 테스트**라고 한다.

## 3. 학습 테스트는 공짜 이상이다

- 학습 테스트는 **별도 비용 없이 외부 API 사용법을 익히는 효과적인 수단**이다.
- 학습 테스트는 아래와 같은 이점을 제공한다:
  - **정확한 실험**을 통해 이해도 상승
  - **외부 패키지 버전 변경 시 검증 도구 역할**
  - **통합 이후에도 호환성을 지속적으로 확인**
- 학습 테스트가 있다면 **라이브러리 업그레이드 시 리스크를 줄일 수 있다**.

## 4. 아직 존재하지 않는 코드를 사용하기

- **외부 시스템이나 아직 개발되지 않은 모듈**과 연동해야 할 때, 직접 구현한 **인터페이스를 기준으로 코드를 작성**할 수 있다.
- 이 경우 우리는 인터페이스를 **직접 통제**할 수 있어, 가독성과 유지보수성이 높아진다.
- 테스트에서는 **Fake 객체나 Stub**을 활용해 독립적인 테스트가 가능하다.

## 5. 깨끗한 경계

- **경계에는 변경이 자주 발생**하므로 유연한 설계가 필요하다.
- 경계 코드는 반드시 다음과 같이 관리해야 한다:
  - **경계를 명확히 구분**하고
  - **기대 동작에 대한 테스트 케이스를 작성**하고
  - 외부 라이브러리와의 의존성을 **캡슐화**한다.
- 가능한 한 **외부 패키지를 직접 참조하지 말고**, 이를 감싸는 **Adapter나 Wrapper 클래스를 통해 사용**한다.
- 이는 **향후 유지보수 비용을 줄이고**, 외부 변화에 **우리 코드가 흔들리지 않도록 보호**하는 역할을 한다.

## 6. 마무리

- **외부 코드를 사용할 때는 반드시 경계를 명확히 관리해야 한다.**
- **외부와 내부를 구분하고**, **의존을 최소화하며**, **변화에 대비한 유연한 설계를 갖추는 것**이 깨끗한 코드의 핵심이다.

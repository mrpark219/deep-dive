# 형식 맞추기

## 1. 형식을 맞추는 목적

- **코드 형식은 중요하다**.
- 중요한 만큼, 무조건적으로 규칙을 따르기보다는 **팀 내 합의된 기준**을 통해 **일관된 의사소통 수단**으로 삼아야 한다.
- 형식은 **전문 개발자의 기본적인 의무 중 하나**이며, 가독성과 유지보수성을 좌우한다.

## 2. 적절한 행 길이를 유지하라

- 파일의 **세로 길이**는 적절해야 한다.
- FitNesse 프로젝트(오픈 소스 인수 테스트 자동화 도구이자, Fit 프레임워크를 기반으로 개발된 위키 기반 웹 서버)에서는 파일 평균 길이가 **약 65줄**이며, 대부분의 파일은 **40~100줄** 사이에 속한다.
- 일반적으로 **짧은 파일이 가독성 측면에서 유리**하다.

## 3. 신문 기사처럼 작성하라

- 소스 코드는 **신문 기사처럼 위에서 아래로 읽히도록** 구성해야 한다.
- 상단에는 고차원 개념과 요약이, 하단으로 갈수록 **구체적이고 저차원적인 내용**이 배치되어야 한다.
- 클래스, 함수, 블록 이름은 **간결하지만 명확하게 의도를 표현**해야 하며, 이름만 보고도 어떤 기능을 하는지 판단할 수 있어야 한다.

## 4. 개념은 빈 행으로 분리하라

- **완결된 생각의 묶음**은 빈 행으로 시각적으로 구분한다.
- 패키지 선언부, import 구문, 함수 사이에는 **의미 단위의 구분을 위한 빈 행**이 필요하다.
- 빈 행은 새로운 개념의 시작을 알리는 **시각적 신호**가 된다.

## 5. 세로 밀집도

- **줄 간격이 멀어지면 관계가 약해 보이고**, 가까우면 **연관성이 강해 보인다.**
- 밀접하게 관련된 코드 블록은 **가깝게 배치**해야 연관 관계를 드러낼 수 있다.

## 6. 수직 거리

- 서로 밀접한 개념은 **파일 내에서도 가깝게 배치**해야 한다.
- 연관된 코드들이 멀리 떨어져 있으면 **파일과 클래스를 여기저기 찾아다니는 뺑뺑이를 돌았으나 혼란만 가중되는 상황**에 처한다.
- 따라서 수직 거리 조절을 통해 **개념 간의 관계**를 표현한다.

### 6.1 변수 선언

- **변수는 사용하는 위치에 최대한 가깝게 선언**한다.
- 지역 변수는 보통 **함수 맨 앞**에 선언하지만, **너무 먼 경우에는 적절히 가까이** 선언한다.

### 6.2 인스턴스 변수

- 인스턴스 변수는 **클래스의 가장 상단에 선언**한다.
- 서로 관련 있는 변수는 **세로로 밀착**시켜 가독성을 높인다.
- 잘 설계된 클래스는 **여러 메서드에서 인스턴스 변수를 함께 사용**하기 때문이다.

### 6.3 종속 함수

- A 함수가 B 함수를 호출한다면, 두 함수는 **세로로 가까이 위치**해야 한다.
- 가능하다면 **호출하는 함수를 호출당하는 함수보다 위에 배치**하면,  
  **자연스럽게 위에서 아래로 읽히는 흐름**이 만들어진다.

### 6.4 개념적 유사성

- 개념적으로 연관된 코드들은 **서로 끌어당기는 성질**이 있다.
- 친화도가 높을수록 **서로 가까이 배치**하는 것이 좋다.
- 예:
  - 어떤 함수가 다른 함수를 호출하는 경우
  - 변수와 해당 변수를 사용하는 함수
  - 유사한 기능을 수행하는 함수 그룹

## 7. 가로 형식 맞추기

- 한 행은 **가로로 얼마나 길어야 적당한가?**
- 대부분의 경우 **20~60자 이내**로 사용되며, **120자 이하**를 개인적으로 추천한다.
- 긴 줄은 코드의 **가독성을 저하시킬 수 있고**, 줄 바꿈이나 스크롤을 유발한다.

### 7.1 가로 공백과 밀집도

- 가로 공백은 **논리적 연관성**을 표현하는 수단이다.
- 예: `int sum = a + b;`
  - `=` 연산자 양쪽에 공백을 넣어 **할당 의미**를 명확히 한다.
- 반면, **함수 이름과 괄호** 사이에는 공백을 넣지 않는다: `doSomething(param)`
  - 함수명과 인수는 밀접한 관계이기 때문에 **공백 없이 붙여야** 같은 개념으로 인식된다.
- 가로 공백은 **명확성과 집중력 향상**을 위한 시각적 장치다.

### 7.2 가로 정렬

```java
int     count     = 10;
String  name      = "mrpark219";
boolean isActive  = true;
```

- 코드 가독성을 위해 변수 선언, 할당문의 피연산자를 정렬하고 싶어질 때가 있다.
- 하지만 이는 **작은 만족감을 위한 시각적 정렬**일 뿐이며,** 코드 유지보수나 변경 시 불필요한 변경을 야기**한다.
- 정렬이 필요할 정도로 선언이 많다면, **클래스를 분리할 시점**일 수 있다.
- 정렬보다 중요한 건 **의미를 기준으로 묶고 정돈**하는 것이다.

### 7.3 들여쓰기

- 들여쓰기는 **코드 계층 구조**를 시각적으로 표현하는 방법이다.
- 들여쓰기 수준은 **논리적 블록의 깊이**를 반영해야 하며,
- 일반적으로 2~4칸을 사용한다.
- 들여쓰기를 통해 **범위(Scope)의 시작과 끝이 명확**해지고, 코드의 구조적 흐름을 파악하기 쉬워진다.

### 7.4 들여쓰기 무시하기

- 간단한 if, while 구문에서 중괄호 없이 한 줄로 표현하고 싶은 유혹이 생긴다.
- 하지만 들여쓰기를 생략하면, 구문 오류나 오해를 유발할 수 있다.
- 반드시 중괄호를 넣고, 정상적으로 들여쓰기하여 **일관된 코드 스타일을 유지**해야 한다.

### 7.5 가짜 범위

- 빈 루프 또는 조건문에서 괄호를 생략하거나 잘못 사용할 수 있다.
- 이럴 경우, **명확하게 블록을 정의하고 주석을 추가**해야 한다.

## 8. 마무리

- 프로그래머마다 자신만의 스타일과 규칙이 있다.
- 그러나 협업을 한다면, **개인 규칙보다 팀 규칙을 우선**해야 한다.
- 팀은 일관성 있는 규칙에 합의하고, 모든 구성원은 이를 지속적으로 지켜야 한다.
- 스타일이 통일되면 코드 리뷰가 쉬워지고, **가독성과 생산성이 향상**된다.

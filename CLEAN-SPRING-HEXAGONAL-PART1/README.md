# 토비의 클린 스프링 - 도메인 모델 패턴과 헥사고날 아키텍처 Part 1

## 1. 도메인 모델

- **도메인(Domain)** 이란, 소프트웨어가 해결하고자 하는 **특정 주제 영역 또는 문제 영역**이다.
- 소프트웨어는 이러한 도메인을 반영해야 하는데, 현실 세계의 도메인을 코드로 직접 옮길 수는 없다. 따라서 도메인을 추상화한 **도메인 모델**을 만들어야 한다.
- 도메인 모델은 특정 문제 영역의 **핵심 지도**와 같다. 이는 도메인에 존재하는 **중요한 개념과 규칙, 그리고 이들 사이의 관계를 표현**하는 것이다.

## 2. 도메인 주도 설계 (DDD)

- **도메인 주도 설계(DDD, Domain-Driven Design)** 는 복잡한 도메인의 문제를 해결하기 위한 접근법으로, **도메인 모델을 개발 과정의 중심에 두는 것**이다.
- DDD에서는 개발자뿐만 아니라, 도메인 전문가와 이해관계자 등 **모두가 함께 참여**하여 도메인 모델을 만들고 지속적으로 발전시킨다.
- DDD의 핵심 사상은 다음과 같다.
  - **모델 주도 설계 (Model-Driven Design)**: 도메인 모델이 실제 설계와 코드까지 일관되게 이어져야 한다.
  - **보편 언어 (Ubiquitous Language)**: 팀 안에서 도메인 모델에 기반한 단일 어휘 체계를 만들고, 이를 회의, 문서, 코드 등 모든 곳에서 일관되게 사용해야 한다.

## 3. 도메인 모델 만들기

- **1. 듣고 배우기**
  - 도메인 전문가(domain expert)의 설명을 통해 **도메인에 대한 지식을 습득**하는 단계이다.
- **2. 핵심 개념 식별**
  - 설명에서 드러나는 **핵심적인 개념과 단어(용어)들을 식별**하는 단계이다.
- **3. 관계 정의**
  - 앞에서 식별한 **개념들 사이의 연결고리, 즉 관계를 정의**하는 단계이다.
- **4. 속성 및 행위 명시**
  - 각 개념이 가지는 **핵심적인 속성(데이터)과 기본 행위(기능)를 명시**하는 단계이다.
- **5. 시각화**
  - 개념들 사이의 관계를 **그림으로 도식화하여 모델을 가시적으로 표현**하는 단계이다.
- **6. 반복하며 다듬기**
  - 완성된 모델을 바탕으로 **전문가와 다시 이야기하며 지속적으로 모델을 다듬고 발전**시키는 단계이다.

## 4. 도메인 전문가가 없다면

- **가상 도메인 전문가 활용**
  - 창업가, 기획자, PO(Product Owner) 등 **비즈니스에 대한 이해도가 가장 높은 사람**을 가상의 도메인 전문가로 삼아 협력하는 것이다.
- **집단적 학습**
  - **이벤트 스토밍(Event Storming)** 과 같은 워크숍을 통해, 여러 이해관계자가 모여 함께 도메인을 탐색하고 학습하는 것이다.
- **가설 기반의 점진적 모델링**
  - 처음부터 완벽한 모델을 추구하는 대신, **가설을 세우고 빠르게 프로토타입을 만들어 검증**하며 점진적으로 모델을 발전시키는 것이다.
- **보편 언어의 의식적 구축**
  - 팀 내에서 사용하는 용어를 **의식적으로 통일하고, 문서를 통해 공유**하며 보편 언어(Ubiquitous Language)를 점진적으로 만들어 나가는 것이다.
- **초기 사용자와의 적극적인 소통**
  - 베타 테스터나 초기 사용자들의 피드백을 통해 **실제 사용자의 관점에서 도메인을 이해**하고 모델을 개선하는 것이다.
- **경쟁 서비스 분석**
  - 경쟁 업체의 서비스를 분석하여, 해당 **도메인의 일반적인 기능과 용어를 학습**하는 것이다.
- 결론적으로, 도메인 전문가가 없는 환경에서는 도메인 모델을 **더욱 적극적으로 공유하고 지속적으로 발전**시키려는 노력이 훨씬 더 중요하다.

## 5. 엔티티(Entity)

- 도메일 모델을 만들 떄 사용하는 패턴
- 도메인 안에 있는 대상이나 개념
- 고유한 식별자(identity)를 가지고 이를 통해서 개별적으로 구분된다
- 생명주기(life cycle)를 가진다. 시간의 흐름에 따라 상태가 변경될 수 있다.

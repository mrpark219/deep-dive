# 애플리케이션 배포를 위한 컨테이너 가상화

## 1. 가상화(Virtualization)

- 물리적인 컴퓨터 리소스를 다른 시스템이나 애플리케이션에서 사용할 수 있도록 제공하는 기술이다.
  - 플랫폼 가상화: 운영체제를 가상화하여 여러 OS를 동시에 운영할 수 있도록 한다.
  - 리소스 가상화: CPU, 메모리, 저장소 등의 하드웨어 자원을 논리적으로 분리하여 제공한다.

### 1.1 하이퍼바이저(Hypervisor)

- Virtual Machine Manager(VMM)라고도 불리며, 다수의 운영체제를 동시에 실행하기 위한 논리적 플랫폼이다.
- 호스트 머신에서 가상 머신을 생성하고 관리하는 데 사용된다.
- 유형:
  - **Type 1 (Native 또는 Bare-metal)**: 하드웨어 위에 직접 설치되어 동작하며, 성능이 뛰어나고 오버헤드가 적다.
  - **Type 2 (Hosted)**: 기존의 운영체제 위에서 실행되며, 호스트 OS의 자원을 이용한다.

## 2. 컨테이너 가상화(Container Virtualization)

- 운영체제 수준에서의 가상화 기술로, 호스트 OS 커널을 공유하면서 각 컨테이너는 독립된 사용자 공간에서 실행된다.

### 2.1 OS Virtualization

- Host OS 위에 Guest OS 전체를 가상화한다.
- 대표 도구: VMWare, VirtualBox
- 자유도는 높지만, 시스템 자원을 많이 사용하여 성능이 저하될 수 있다.

### 2.2 Container Virtualization

- Host OS가 가진 커널을 공유하며, 필요한 프로세스만 실행한다.
- 최소한의 라이브러리와 도구만 포함하여 경량화되어 있다.
- 컨테이너의 생성 속도가 빠르고, 자원 사용이 효율적이다.

## 3. 컨테이너 이미지(Container Image)

- 컨테이너 실행에 필요한 모든 파일, 설정, 라이브러리 등을 포함한 불변의 패키지이다.
- 컨테이너 이미지는 **상태를 가지지 않으며(Stateless), Immutable(불변)**하다.
- 이미지를 기반으로 컨테이너가 **런타임 환경에서 실체화되어 실행**된다.
- 하나의 이미지를 기반으로 여러 개의 동일한 컨테이너를 생성할 수 있다.
- 이미지는 일반적으로 **계층적 구조(Layered Structure)**로 구성되어 있어, 공통된 베이스 이미지를 재사용하며 효율적인 저장과 배포가 가능하다.

## 4. Dockerfile

- Docker 이미지를 생성하기 위한 스크립트 파일이다.
- 애플리케이션 실행에 필요한 환경 설정, 의존성 설치, 실행 명령어 등이 정의되어 있다.
- **도커 이미지 생성 과정(build process)** 을 자동화하기 위해 사용된다.
- 자체 DSL(Domain-Specific Language)을 사용하여 작성되며, 명령어는 **위에서 아래로 순차적으로 실행**된다.

## 5. Docker 네트워크 종류

- Docker 컨테이너 간 통신을 위해 다양한 네트워크 드라이버를 사용할 수 있다.

### 5.1 Bridge Network

- 가장 기본적인 네트워크 방식이다.
- **컨테이너 간의 통신이 가능하도록 가상 네트워크를 생성**한다.
- 명령어: `docker network create --driver bridge [브릿지 이름]`

### 5.2 Host Network

- 컨테이너가 **호스트의 네트워크를 그대로 사용**하도록 설정한다.
- **포트 포워딩 없이 컨테이너 내부의 애플리케이션에 접근**할 수 있다.
- 성능 면에서 이점이 있지만, **컨테이너 간 네트워크 분리**가 어렵다.

### 5.3 None Network

- 네트워크를 완전히 사용하지 않는 설정이다.
- 컨테이너가 **외부와 단절된 상태**로 실행된다.
- **IO 네트워크만 사용**하며, 보안이나 격리가 필요한 경우에 사용된다.

### 5.4 Overlay

- 여러 Docker 호스트 간 네트워크를 구성할 때 사용한다.
- Docker Swarm 모드에서 주로 사용된다.
- 서로 다른 호스트에 있는 컨테이너들이 같은 네트워크에 있는 것처럼 통신할 수 있다.
